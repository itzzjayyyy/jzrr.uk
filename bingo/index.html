<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bingo Number Caller</title>

<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto+Condensed:wght@300;400;700&display=swap" rel="stylesheet">

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: 'Roboto Condensed', sans-serif;
    color: #e0e0e0;
    overflow-x: hidden;
    padding-bottom: 60px;
}

/* Background gradient */
.gradient-container {
    position: fixed;
    inset: 0;
    background: linear-gradient(-45deg, #1a237e, #0d47a1, #64ffda, #00bcd4);
    background-size: 400% 400%;
    animation: gradientBG 10s ease infinite;
    z-index: -1;
}

@keyframes gradientBG {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* Layout */
.hero {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    min-height: 100vh;
    color: white;
    padding-top: 40px;
}

.hero-content {
    animation: heroFadeInDown 1.1s ease-out;
    max-width: 600px;
}

@keyframes heroFadeInDown {
    from { opacity: 0; transform: translateY(-25px) scale(0.97); filter: blur(2px); }
    to   { opacity: 1; transform: translateY(0) scale(1);   filter: blur(0); }
}

.hero-content h1 {
    font-family: 'Orbitron', sans-serif;
    font-size: 3.2em;
    text-shadow: 0 0 15px #64ffda, 0 0 30px #00bcd4;
}

.hero-content p {
    margin-top: 10px;
    font-size: 1.15em;
    text-shadow: 0 0 8px #64ffda;
}

/* Bingo card container */
.bingo-card {
    margin-top: 30px;
    background: rgba(0,0,0,0.35);
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 0 15px #64ffda;
    width: 90%;
    max-width: 500px;
    animation: cardFloatIn 1s ease-out 0.15s both;
}

@keyframes cardFloatIn {
    from { opacity: 0; transform: translateY(30px) scale(0.97); filter: blur(3px); }
    to   { opacity: 1; transform: translateY(0)   scale(1);    filter: blur(0); }
}

.bingo-title {
    font-family: 'Orbitron', sans-serif;
    font-size: 2.1em;
    color: #64ffda;
    text-shadow: 0 0 10px #00bcd4;
}

.bingo-subtitle {
    font-size: 1.05em;
    margin: 10px 0 20px;
    opacity: 0.9;
}

/* Current number */
#current-label {
    font-size: 1.1em;
    margin-top: 10px;
    opacity: 0.9;
}

#number {
    font-size: 4em;
    font-family: 'Orbitron', sans-serif;
    text-shadow: 0 0 15px #64ffda, 0 0 25px #00bcd4;
    margin-top: 8px;
    min-height: 1.2em;
}

/* Number animation */
.number-animate {
    animation: numberPop 0.55s cubic-bezier(0.2, 0.7, 0.3, 1.2);
}

@keyframes numberPop {
    0% {
        transform: scale(0.4) rotateX(70deg);
        opacity: 0;
        text-shadow: 0 0 0 #64ffda;
        filter: blur(4px);
    }
    55% {
        transform: scale(1.15) rotateX(0deg);
        opacity: 1;
        text-shadow: 0 0 18px #64ffda, 0 0 30px #00bcd4;
        filter: blur(0);
    }
    100% {
        transform: scale(1) rotateX(0deg);
        text-shadow: 0 0 12px #64ffda, 0 0 22px #00bcd4;
    }
}

/* Controls */
.bingo-controls {
    margin-top: 16px;
}

.bingo-controls button {
    padding: 12px 22px;
    font-size: 1.05em;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    margin: 8px;
    background: #64ffda;
    color: #000;
    box-shadow: 0 0 8px #64ffda, 0 0 20px #00bcd4;
    transition: transform 0.18s ease, box-shadow 0.18s ease, background 0.18s ease;
    animation: buttonPulse 2.8s ease-in-out infinite alternate;
}

@keyframes buttonPulse {
    from {
        transform: translateY(0) scale(1);
        box-shadow: 0 0 8px #64ffda, 0 0 20px #00bcd4;
    }
    to {
        transform: translateY(-1px) scale(1.03);
        box-shadow: 0 0 14px #64ffda, 0 0 28px #00bcd4;
    }
}

.bingo-controls button:hover:not(:disabled) {
    transform: translateY(-1px) scale(1.06);
    background: #00bcd4;
}

.bingo-controls button:active:not(:disabled) {
    transform: translateY(1px) scale(0.97);
    box-shadow: 0 0 4px #64ffda, 0 0 10px #00bcd4;
}

.bingo-controls button:disabled {
    background: #666;
    color: #222;
    box-shadow: none;
    animation: none;
}

/* History */
#history-title {
    font-size: 1.3em;
    color: #64ffda;
    margin-top: 24px;
}

#history {
    margin-top: 10px;
}

/* Bubbles */
.bubble {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 56px;
    height: 56px;
    margin: 5px;
    border-radius: 50%;
    border: 2px solid #64ffda;
    background: rgba(0,0,0,0.7);
    box-shadow: 0 0 10px #64ffda, 0 0 20px #00bcd4;
    animation: bubbleIn 0.35s ease-out both;
}

@keyframes bubbleIn {
    0% {
        transform: scale(0.1) translateY(10px);
        opacity: 0;
        filter: blur(3px);
    }
    70% {
        transform: scale(1.08) translateY(0);
        opacity: 1;
        filter: blur(0);
    }
    100% {
        transform: scale(1) translateY(0);
    }
}

.bubble-number {
    font-size: 1.15em;
    font-weight: 700;
}

/* Footer */
footer {
    text-align: center;
    padding: 15px 0;
    color: #64ffda;
    text-shadow: 0 0 8px #00bcd4;
}
</style>
</head>
<body>

<div class="gradient-container"></div>

<div class="hero">

    <div class="hero-content">
        <h1>Bingo Number Caller</h1>
        <p>
            Use this screen to call numbers for your game.  
            Click ‚ÄúNext number‚Äù whenever you‚Äôre ready for the room to see a new one.
        </p>
    </div>

    <div class="bingo-card">

        <h2 class="bingo-title">Ready when you are</h2>
        <p class="bingo-subtitle">
            Nothing fancy here: just fair, random numbers from 1 to 75.
        </p>

        <!-- Current number -->
        <div id="current-wrapper">
            <div id="current-label">Current number</div>
            <div id="number">--</div>
        </div>

        <!-- Controls -->
        <div class="bingo-controls">
            <button id="draw-btn" type="button">Next number</button>
            <button id="reset-btn" type="button">Start over</button>
            <button id="projector-btn" type="button">Open big-screen view</button>
        </div>

        <!-- History -->
        <h3 id="history-title">Numbers so far</h3>
        <div id="history"></div>

    </div>
</div>

<footer>Have fun, and good luck to everyone playing ‚ú®</footer>

<script>
const TOTAL_NUMBERS = 75;

const numberEl     = document.getElementById("number");
const historyEl    = document.getElementById("history");
const drawBtn      = document.getElementById("draw-btn");
const resetBtn     = document.getElementById("reset-btn");
const projectorBtn = document.getElementById("projector-btn");

let remaining = [];
let history   = [];
let projectorWindow = null;

function init() {
    remaining = Array.from({ length: TOTAL_NUMBERS }, (_, i) => i + 1);
    history   = [];
    numberEl.textContent = "--";
    numberEl.classList.remove("number-animate");
    historyEl.innerHTML = "";
    drawBtn.disabled = false;
    updateProjector(null);
}

function drawNumber() {
    if (remaining.length === 0) {
        alert("All numbers have been drawn. Game over ‚Äì time to check those cards! üéâ");
        drawBtn.disabled = true;
        return;
    }
    const i   = Math.floor(Math.random() * remaining.length);
    const num = remaining.splice(i, 1)[0];
    history.push(num);
    updateDisplay(num);
}

function updateDisplay(num) {
    // re-trigger animation on big number
    numberEl.classList.remove("number-animate");
    void numberEl.offsetWidth; // force reflow
    numberEl.textContent = num;
    numberEl.classList.add("number-animate");

    // rebuild history with cascade animation
    historyEl.innerHTML = "";
    history.forEach((n, index) => {
        const bubble = document.createElement("div");
        bubble.className = "bubble";
        bubble.style.animationDelay = (index * 0.02) + "s";

        const numberSpan = document.createElement("div");
        numberSpan.className = "bubble-number";
        numberSpan.textContent = n;

        bubble.appendChild(numberSpan);
        historyEl.appendChild(bubble);
    });

    updateProjector(num);
}

// PROJECTOR WINDOW SETUP
function openProjector() {
    // If not open or already closed, open a new one
    if (!projectorWindow || projectorWindow.closed) {
        projectorWindow = window.open("", "bingo_projector", "width=800,height=600");
        if (!projectorWindow) {
            alert("Please allow popups in your browser so the big-screen view can open.");
            return;
        }

        projectorWindow.document.write(`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <title>Bingo ‚Äì Big Screen</title>
                <link rel="preconnect" href="https://fonts.googleapis.com">
                <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
                <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
                <style>
                    * { box-sizing: border-box; margin: 0; padding: 0; }
                    html, body {
                        margin: 0;
                        height: 100%;
                        font-family: 'Orbitron', system-ui, sans-serif;
                        color: #ffffff;
                        overflow: hidden;
                    }
                    .background {
                        position: fixed;
                        inset: 0;
                        background: linear-gradient(-45deg, #1a237e, #0d47a1, #64ffda, #00bcd4);
                        background-size: 400% 400%;
                        animation: gradientBG 10s ease infinite;
                        z-index: -1;
                    }
                    @keyframes gradientBG {
                        0% { background-position: 0% 50%; }
                        50% { background-position: 100% 50%; }
                        100% { background-position: 0% 50%; }
                    }
                    .wrapper {
                        position: relative;
                        z-index: 1;
                        height: 100%;
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        text-align: center;
                        padding: 20px;
                    }
                    .label {
                        font-size: 3vw;
                        min-font-size: 20px;
                        text-shadow: 0 0 10px #64ffda, 0 0 20px #00bcd4;
                        margin-bottom: 1rem;
                    }
                    #projector-number {
                        font-size: 20vw;
                        line-height: 1;
                        text-shadow: 0 0 30px #64ffda, 0 0 60px #00bcd4;
                    }
                    @media (max-width: 700px) {
                        .label {
                            font-size: 5vw;
                        }
                        #projector-number {
                            font-size: 30vw;
                        }
                    }
                </style>
            </head>
            <body>
                <div class="background"></div>
                <div class="wrapper">
                    <div class="label">The current number is:</div>
                    <div id="projector-number">--</div>
                </div>
            </body>
            </html>
        `);
        projectorWindow.document.close();
    }

    // Sync current state
    if (history.length > 0) {
        updateProjector(history[history.length - 1]);
    } else {
        updateProjector(null);
    }
}

function updateProjector(num) {
    if (!projectorWindow || projectorWindow.closed) return;

    const doc = projectorWindow.document;
    const el  = doc.getElementById("projector-number");
    if (!el) return;

    if (num === null) {
        el.textContent = "--";
    } else {
        el.textContent = String(num);
    }
}

// EVENTS
drawBtn.addEventListener("click", drawNumber);

resetBtn.addEventListener("click", () => {
    init();
});

projectorBtn.addEventListener("click", openProjector);

// Init on load
init();
</script>

</body>
</html>